# 메모리 관리  

## 메모리 관리 정책  
- 적재 정책<sup>fetch policy</sup>: **디스크에서 메모리로 프로세스를 반입할 시기를 결정**한다. 
 - 요구 적재: 운영체제나 시스템 프로그램, 사용자 프로그램 등 참조 요청에 따라 다음에 실행할 프로세스를 메모리에 적재
 - 예상 적재: 시스템의 요청을 미리 예측하여 메모리에 적재  

- 배치 정책<sup>placement policy</sup>: 디스크에서 반입한 프로세스를 메모리의 어느 위치에 저장할 것인지 결정  
 - 최초 적합  
 - 최적 적합  
 - 최악 적합  

- 대치 정책<sup>replacement policy</sup>(재배치 정책, 교체 정책): 메모리가 충분하지 않을 때 현재 메모리에 할당된 프로세스 중 제거할 프로세스를 결정하는 교체 방법  
 - 선입선출<sup>FIFO, First In First Out</sup>  
 - 최근 최소 사용<sup>LRU, Least Recently Used</sup>  

## 메모리 할당 방법  
- 연속적으로 적재하는 **연속 메모리 할당 방법**  
- 페이지나 세그먼트 단위로 나눠 여러 곳에 적재하는 **비연속(분산) 메모리 할당 방법**    

## 연속 메모리 할당 방법  
- 단일 프로그래밍 환경: 직접 배치, 중첩(오버레이), 스와핑(프로세스 교체) 등을 이용. 단순하고 이해가 쉬우나 한 번에 한 프로그램만 사용하므로 메모리 효율성↓  
- 다중 프로그래밍 환경: 고정 분할 방법과 가변 분할 방법, 버디 시스템 등  

## 다중 프로그래밍 환경에서 연속 메모리 할당 방법   
- 고정 분할 방법: 메모리를 여러 개의 고정된 크기로 분할해 분할된 각 메모리는 프로세스, 즉 작업 하나를 실행 가능. 논리적 주소가 분할된 프로그램보다 크면 오류가 발생하고, 작으면 내부 단편화 발생  
- 가변 분할 방법: 고정된 경계를 없애고 각 프로세스가 필요한 만큼 메모리를 할당. 사용 가능 공간을 어느 작업에 할당할지 결정하는 방법으로 최초 적합, 최적 적합, 최악 적합 등이 있다.  
- 버디 시스템: 고정 분할 방법이나 동적 분할 방법에서 발생하는 단편화 현상을 해결하는 방법  
 - 큰 버퍼들을 반복적으로 이등분해서 작은 버퍼들을 만들며, 가능할 때마다 인접한 빈 버퍼들을 합치는 과정을 반복  

## 분산 메모리 할당 방법  

- 연속 메모리 할당 방법에서 외부 단편화를 해결하고 내부 단편화를 최소화 하기 위해 **프로그램을 페이지나 세그먼트 단위로 나눠 여러 곳에 적재하여 할당하는 방법**    

## 페이징 방법  
- 처리할 작업, 즉 프로세스를 크기가 동일한 페이지로 나눠 처리  
- 페이지 테이블(또는 페이지 맵 테이블)을 이용해 논리적 주소를 물리적 주소로 변환한다.  
- 논리적 주소는 페이지 번호+오프셋(변위)  

## 다중 단계 페이징 시스템  
- 논리적 주소가 클수록 물리적 주소로 변환하는 과정에서 필요한 페이지 테이블 크기도 증가 → 메모리에 더 큰 적재 공간이 필요(메모리 낭비)  
 - 실제 참조할 페이지가 있는 영역에서만 단계별(n 단계) 페이지 테이블을 설정하는 페이징 시스템을 구성해 해결 가능  

## 주소 변환 방법  
 - 직접 매핑  
 - 연관 매핑  
 - 연관, 직접 매핑을 결합한 주소 변환  

## 공유 페이지  
- 페이징 시스템의 장점으로 시분할 환경에서 중요한 공통 코드를 공유할 수 있게 함  
- 공유 코드는 재진입을 허용하므로 재진입 코드 또는 순수 코드라 한다.  
 - 오직 읽을 수만 읽고, 스스로 수정 불가, 프로세스들은 재진입 코드에서 데이터 항목을 지정할 수 없다.  

## 세그먼테이션  
- 프로세스 관점으로 메모리를 지원하는 관리 방법  
- 세그먼트의 구성  
 - 서브루틴 
 - 프로시저 
 - 함수나 모듈 등  
- 각 세그먼트는 연관된 기능을 수행하는 하나의 모듈 프로그램으로 생각  
- 세그먼트의 논리적 주소 = 세그먼트 번호 + 오프셋  

## 페이지화된 세그먼테이션  
- 페이징은 내부 단편화가 발생할 수 있으나 메모리를 효율적으로 사용 가능  
- 세그먼트는 외부 단편화가 발생할 수 있으나 가변적인 데이터 구조와 모듈 처리, 공유와 보호의 지원이 편리  
- → 둘의 장점을 취합한 방법 **페이지화된 세그먼테이션**  
- 세그먼트를 페이징해 외부 단편화 문제를 제거하면서 할당 과정을 쉽게 해결  




