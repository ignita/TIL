# 패키지 관리  

- **패키지 관리**는 시스템에 소프트웨어를 설치하고 유지 및 관리하는 방법을 말함.  
- 대다수 사람들이 배포업체로부터 **패키지**를 설치함으로써 그들이 필요한 몯느 소프트웨어를 충족 가능   
 - 예전에는 소프트웨어를 설치하려면 **소스 코드**를 다운로드 받아서 컴파일까지 직접 해야 했음...  

## 패키지 시스템  

- 리눅스 배포판마다 각기 다른 패키지 시스템을 운영  
 - 그래서 특정 배포판을 위해 만들어진 패키지는 다른 배포판과 호환 x  
 - 배포판은 크게 두 진영  
   - 데비안 **.deb**  
   - 레드햇 **.rpm**    
   - 기타 등등도 있음...

- 주요 패키지 시스템 분류  
 
 | 패키지 시스템 | 배포판(일부만 나열 |  
 | --- | --- |  
 | 데비안 스타일 | Debian, Ubuntu, Xandros, Linspire |  
 | 레드햇 스타일 | Fedora, CentOS, Red Hat Enterprise Linux, openSUSE, Mandriva, PCLinuxOS |  

## 패키지 시스템 동작 원리  


- 상업용 소프트웨어 산업에서 소프트웨어를 배포하는 방법  
 주로 "설치 디스크"를 구매해 "설치 마법사"를 실행해서 시스템에 최신 애플리케이션 설치  

- 반면, 리눅스는 인터넷에서 다운로드.  
 - 리눅스 배포업체가 제공하는 소프트웨어들은 대개 패키지 파일 형태이거나 직접 설치할 수 있도록 소스 코드 형태로도 제공  

### 패키지 파일  

- 패키지 시스템에서 소프트웨어의 가장 기본적인 단위를 패키지 파일이라 한다.  
- **패키지 파일**은 소프트웨어 패키지를 구성하고 있는 파일들의 압축된 형태  
 - 설치될 파일뿐만 아니라 해당 패키지 자체에 대한 메타데이터도 가지고 있음(패키지와 그 내용에 대한 텍스트 명세서 등).  
 - 또 패키지 설치 전과 설치 후에 각각의 설정 작업ㅇ르 수행하는 스크립트도 존재  
- 패키지 파일은 **패키지 관리자**(Package maintainer)라고 하는 사람에 의해 만들어짐. 주리 배포판 회사 직원.  
- 패키지 관리자는 **상위 배포자**(프로그램 원작자)에게 소스 코드 형태의 소프트웨어를 받아 컴파일 후, 메타데이터와 기타 필요한 설치 스크립트들을 만든다.  종종 소스 코드를 수정하기도 함.  

### 저장소  

- 하나의 배포판은 소프트웨어 개발주기의 각 단계에 따라 여러 개의 다른 저장소들을 운영할 수도 있음.  
- 예를 들면, **테스트용 저장소**가 있음. 여기에 빌드된 패키지들을 올려 일반적인 배포 형태로 릴리즈하기 전, 버그를 찾고자 용감한 사용자들이 먼저 사용할 수 있도록 함.  
- **개발용 저장소** - 여기에는 당므에 주요 배포판에 포함될 작업 중인 패키지들이 저장됨.  

### 의존성  

- 프로그램은 거의 독립적이지 않다. 프로그램 작업을 수행하기 위해 다른 ㅅ프트웨어 구성 요소들을 의존하게 됨.  
 - 예) 입출력과 같은 기본 작업도 많은 프로그램들의 공유 루틴에 의해 제어됨.  
   - 이러한 루틴들은 **공유 라이브러리**라고 하는 공간에 저장되고 다수의 프로그램들에 필수 서비스를 제공  

- 만일 패키지가 공유 라이브러리와 같은 공유 자원을 필요로 한다면, **의존성**이 있다고 말한다.  
 - 최신 패키지 관리 시스템은 모두 **의존성 문제를 해결**하기 위한 방안을 몇 가지 제공  
   - 해당 패키지와 관련된 모든 의존성들까지 설치되도록 보장하기 위함.  

### 고수준과 저수준 패키지 툴  

- 저수준 툴 - 패키지 파일을 설치하고 삭제하는 작업을 관리  
- 고수준 툴 - 메타데이터 검색 및 의존성 문제 해결과 같은 작업을 수행  

- 패키지 시스템 도구  

 | 배포판 | 저수준 도구 | 고수준 도구 |  
 | --- | --- | --- |  
 | 데비안 형식 | dpkg | apt-get aptitude |  
 | 페도라, 레드햇 엔터프라이즈 리눅스, 센트OS | rpm | yum |  

## 일반적인 패키지 관리 작업  

- _pakage_name_은 실제 패키지의 이름, _pakage_file_은 해당 패키지를 포함하고 있는 파일 이름  

### 저장소에서 패키지 찾기  

- 저장소 메타데이터 검색 시 고수준 도구를 이용해 패키지 이름이나 설명을 기반으로 패키지를 찾을 수 있다.  

- 패키지 검색 명령어  
 
 | 형식 | 명령어 |  
 | --- | --- |  
 | 데비안 | `apt-get update; apt-cache search search_string` |  
 | 레드햇 | `yum search search_string` |  

- 예시) 레드햇 시스템에서 emacs 텍스트 편집기에 대한 yum 저장소 검색하기.  
 ```
 yum search emacs 
 ```

### 저장소에 있는 패키지 설치하기 

- 고수준 도구로 저장소에 있는 패키지를 다운로드해 의존성 패키지들과 함께 설치할 수 있다.  

- 패키지 설치 명령어  
 
 | 형식 | 명령어 |  
 | --- | --- |
 | 데비안 | `apt-get update; apt-get install pakage_name` |  
 | 레드햇 | `yum install pakage_name` |  

- 예시) apt 저장소에 있는 emacs 텍스트 편집기를 데비안 시스템에 설치하기.  
 
 ```
 apt-get update; apt-get install emacs 
 ```  

### 패키지 파일에서 패키지 설치하기   

- 저장소가 아닌 다른 출처에서 다운로드한 패키지 파일이라면 저수준 도구를 이용해 직접 설치 가능하다(의존성 문제는 해결되지 않는다).  

- 저수준 패키지 설치 명령어  

 | 형식 | 명령어 |  
 | --- | --- |  
 | 데비안 | `dpkg --install pakage_file` |  
 | 레드햇 | `rpm -i pakage_file` |  

- 예시) emacs-22.1.fc7-i386.rpm 패키지 파일을 저장소가 아닌 다른 곳에서 다운로드한 것이라면 다음과 같이 레드햇 시스템에 설치하면 된다.  
 ```
 rpm -i emacs-22.1.fc-i386.rpm
 ```  

### 패키지 삭제하기  

- 고수준 도구나 저수준 도구든 패키지 삭제가 가능하다.  

- 패키지 삭제 명령어  
 
 | 형식 | 명령어 |  
 | --- | --- |  
 | 데비안 | `apt-get remove pakage_name` |  
 | 레드햇 | `yum erase pakage_name` |  

- 예시) 데비안 시스템에서 emacs 패키지 삭제하기.  
 
 ```
 apt-get remove emacs 
 ```

### 저장소로부터 패키지 업데이트하기  

- 가장 일반적인 패키지 관리 작업은 시스템을 항상 최신 버전 패키지로 유지하는 것. 고수준 도구로 이러한 중요한 작업을 한 번에 해결 가능.  

- 패키지 업데이트 명령어  
 
 | 형식 | 명령어 |  
 | --- | --- |  
 | 데비안 | `apt-get update; apt-get upgrade` |  
 | 레드햇 | `yum update` |  

- 예시) 데비안 시스템에 설치된 패키지 업데이트 적용하기  

 ```
 apt-get update; apt-get upgrade
 ```  

### 패키지 파일에서 패키지 업그레이드하기 

- 최신 버전의 패키지를 저장소가 아닌 다른 곳에서 다운로드했더라도 이전 버전에서 최신 버전으로 재설치가 가능하다.  

- 저수준 패키지 업그레이드 명령어  

 | 형식 | 명령어 |  
 | --- | --- | 
 | 데비안 | `dpkg --install pakage_file` | 
 | 레드햇 | `rpm -U pakage_file` |  

- 예시) 레드햇에서 기존에 설치된 emacs를 emacs-22.1-7.fc7-i386.rpm 패키지 파일에 포함된 최신 버전으로 업데이트하기.  
 
 ```
 rpm -U emacs-22.1-7.fc7-i386.rpm
 ```

### 설치된 패키지 확인하기  

- 패키지 목록 명령어  

 | 형식 | 명령어 |  
 | --- | --- | 
 | 데비안 | `dpkg --list` | 
 | 레드햇 | `rpm -qa` |  


### 패키지 설치여부 알아보기  

- 패키지 설치 확인 명령어  

 | 형식 | 명령어 |  
 | --- | --- | 
 | 데비안 | `dpkg --status pakage_name` | 
 | 레드햇 | `rpm -q pakage_name` |  

- 예시) 데비안 시스템에서 emacs 패키지 설치 여부 확인하기  

 ```
 dpkg --status emacs
 ```

### 설치된 패키지 정보 표시하기  

- 패키지 정보 확인 명령어  

 | 형식 | 명령어 |  
 | --- | --- | 
 | 데비안 | `apt-cache show pakage_name` | 
 | 레드햇 | `yum info pakage_name` |    

- 예시) 데비안 시스템의 emacs 패키지 정보 보기  

 ```
 apt-cache show emacs 
 ```  

### 특정 파일과 관련된 패키지 검색하기  

- 패키지 파일(출처) 확인 명령어 

 | 형식 | 명령어 |  
 | --- | --- | 
 | 데비안 | `dpkg --search file_name` | 
 | 레드햇 | `rpm -qf file_name` |  
  
- 예시) 레드햇 시스템에서 /usr/bin/vim 파일이 어떤 패키지에 의해 설치되었는지 알아보기  

 ```
 rpm -qf /usr/bin/vim
 ```


