# 프롬프트 커스터마이징    


## 프롬프트 해부하기  

- 기본 프롬프트의 모양은 다음과 같다. 사용자 이름, 호스트명, 현재 작업 디렉토리를 보여주고 있다.  

```
[me@linuxbox ~]$  
```

- 프롬프트는 PS1(Prompt string 1의 준말)이라고 하는 환경 변수에 의해 정의, echo 명령어로 다음과 같이 확인할 수 있다.  
```
[me@linuxbox ~]$ echo $PS1  
[\u@\h \W]\$
``` 
- 백슬래시 확장 문자가 들어가 있음을 확인 가능하다.  ㅁ
 - 쉘 프롬프트에서 사용되는 이스케이프 문자  
   
   | 시퀀스 | 표시 값 |  
   | --- | --- |  
   | `\a` | ASCII 벨솔. 이 문자가 사용되면 컴퓨터에서 알림 소리가 난다. |  
   | `\d` | 현재 날짜(예: Mon May 26) |  
   | `\h` | 로컬 장치의 호스트명(도메인명 제외) |  
   | `\H` | 호스트명 |  
   | `\j` | 현재 쉘 세션에서 실행중인 작업 개수 | 
   | `\l` | 현재 터미널 장치 이름 |  
   | `\n` | 개행 문자 |  
   | `\r` | 캐리지 리턴 |  
   | `\s` | 쉘 프로그램 이름 |  
   | `\t` | 24시간 기준, 시간:분:초 포맷의 현재 시간 |  
   | `\T` | 12시간 기준, 현재시간 |  
   | `\@` | 12시간 기준, AM/PM 포맷의 현재 시간 |  
   | `\A` | 24시간 기준, 시간:분 포맷의 현재 시간 |  
   | `\u` | 현재 사용자의 사용자 이름 |  
   | `\v` | 쉘 버전정보 |  
   | `\V` | 쉘 버전 및 릴리즈 정보 | 
   | `\w` | 현재 작업 디렉토리의 전체 경로명 | 
   | `\W` | 현재 작업 디렉토리명 |  
   | `\!` | 현재 명령어의 히스토리 번호 | 
   | `\#` | 현재 쉘 세션에 입력된 명령어 개수 |  
   | `\$` | 슈퍼유저 권한일 경우 $값을 표시. 현재는 #값 표시 |  
   | `\[` | 하나 이상의 출력되지 않는 문자들의 시작. 커서를 이동하거나 텍스트 색상을 변경하는 등 비출력 제어 문자를 넣을 때 |  
   | `\]` | 이 기호는 비출력 제어 문자의 끝을 나타낸다. |   

## 다른 형태의 프롬프트 사용해보기   

- 기존 문자열을 또 다른 쉘 변수로 복사해서 백업해둔다.  
```
[me@linuxbox ~]$ ps1_old="$PS1"
```
```
[me@linuxbox ~]$ ps1_old="$PS1"
[me@linuxbox ~]$ PS1 = "$ps1_old"
```
```
[me@linuxbox ~]$ PS1="\$ "
$ 
```  
- 위 처럼 간결하게 바꿀 수 있다.  

## 색상 추가  

- 문자 색상은 표시될 문자열에 내장된 **ANSI 이스케이프 코드**를 터미널 에뮬레이터에 전송함으로써 제어됨  
- 제어 코드는 화면에 "출력"되는 것이 아니라 하나의 명령어로 터미널에 의해 해석  
- `\[` 및 `\]` 시퀀스는 비출력 문자를 나타나게 할 때 사용  
- ANSI 이스케이프 코드는 8진법의 033으로 시작하고(이 코드는 ESC키에 의해 생성), 그 뒤에 오는 것은 부가적인 문자 속성이나 명령  
- 예) 일반적인 검은색으로 텍스트 색상을 설정했다면, 코드는 `/033[0;30m`이다.   
- 색상은 크게 두 그룹으로, 글자 볼드 속성(1)의 적용에 따라 나뉜다. 이 값은 "밝은" 색상을 표현  

- 텍스트 색상 설정을 위한 이스케이프 시퀀스  
 
 | 시퀀스 | 텍스트 색상 |  
 | --- | --- |  
 | \033[0;30m | 검정 |  
 | \033[0;31m | 빨강 |  
 | \033[0;32m | 초록 |  
 | \033[0;33m | 갈색 |  
 | \033[0;34m | 파랑 |  
 | \033[0;35m | 보라 |  
 | \033[0;36m | 청록 |  
 | \033[0;37m | 연회색 |  
 | \033[1;30m | 진회색 |  
 | \033[1;31m | 밝은 빨강 |  
 | \033[1;32m | 연초록 |  
 | \033[1;33m | 노랑 |  
 | \033[1;34m | 연파랑 |  
 | \033[1;35m | 연보라 |  
 | \033[1;36m | 연청록 |  
 | \033[1;37m | 흰색 |   

- 예시  
 - 프롬프트를 빨간색으로 바꾸기  
 ```
 [me@linuxbox ~]$ PS1="\[\033[0;31m\]<\u@\h \W>\$ "  
 ```
 - 프롬프트 다음에 입력하는 글자는 원래 색으로 고치려면, 다른 이스케이프 코드를 프롬프트 끝에 넣어서 이전 색상으로 표시되게 하면 된다.  
 ```
 <me@linuxbxo ~>$ PS1="\[\033[0;31m\]<\u@\h \W>\$\[\033[0m\] "  
 ```  

- 바탕색 설정을 위한 이스케이프 시퀀스  
  
 | 시퀀스 | 바탕색 |
 | --- | --- |
 | \033[0;40m | 검정 |  
 | \033[0;41m | 빨강 |  
 | \033[0;42m | 초록 |  
 | \033[0;43m | 갈색 |  
 | \033[0;44m | 파랑 |  
 | \033[0;45m | 보라 |  
 | \033[0;46m | 청록 |  
 | \033[0;47m | 연회색 |  
 
- 보통(0) 및 볼드(1) 문자 속성 외에도 텍스트는 밑줄(4), 깜빡임 (5), 그리고 역순(7)과 같은 속성이 지원된다. 적당한 모양을 유지하기 위해 많은 터미널 에뮬레이터에서는 깜빡임 속성을 지원하지 않는다.  
- [참고](https://github.com/the1994/TIL/blob/master/C/terminal-text-color.md)  

## 커서 이동 

- 화면상의 다른 위치에 있는 시간이나 다른 종류의 정보를 표현하고자 할 때 주로 쓰인다.  
- 커서 이동 이스케이프 시퀀스  
 
 | 이스케이프 코드 | 실행 |  
 | --- | --- |
 | \033[l;cH | l줄 c열로 커서 이동  |
 | \033[nA | n줄만큼 위로 이동 |  
 | \033[nB | n줄만큼 아래로 이동 |  
 | \033[nC | n개 문자만큼 앞으로 |  
 | \033[nD | n개 문자만큼 뒤로 |  
 | \033[2J | 화면을 지우고 좌측 상단으로 (위치:줄 0, 열 0) |  
 | \033[K | 현재 커서 위치에서부터 현재 라인 끝까지 삭제 |  
 | \033[s | 현재 커서 위치 저장 |  
 | \033[u | 저장된 커서 위치 불러오기 |  

- 위 코드들을 활용해서 화면 상단에 빨간 줄의 시간 정보(노란색 텍스트)가 있는 프롬프트를 만들 수 있다.  

 ```
 PS1="\[033[s\033[0;0H\033[0;41m\033[K\033[1;33m\t\033[0m\033[u\]<\u@\h \W>\$ "  
 ```  
 
 | 시퀀스 | 실행 |  
 | --- | --- |  
 | \[ | 비출력 문자열의 시작. 사용 목적은 나타나는 프롬프트의 크기를 bash가 정확하게 계산할 수 있도록 하기 위함. |  
 | \033[s | 현재 커서 위치 저장. 화면 상단에 시간 정보 표시 후 프롬프트 위치를 되돌리기 위해 필요.  |  
 | \033[0;0H | 좌측 상단으로 커서 이동(위치: 줄 0, 열 0). |  
 | \033[0;41m | 바탕색을 빨간색으로 설정. |   
 | \033[K | 현재 커서 위치(좌측 상단)부터 그 줄 끝까지 삭제. 바탕색이 빨간색이기 때문에 빨간 긴 줄을 만든다. 커서는 이동x |  
 | \033[1;33m | 텍스트 색상을 노란색으로 설정. |  
 | \t | 현재 시각 표시. 이 문자는 "출력" 가능하지만 여전히 비출력 문자에 넣을 수 있음. | 
 | \033[0m | 색상 지우기. 텍스트 색상 및 바탕색에 모두 적용. |  
 | \033[u | 저장된 커서 위치 불러오기. |
 | \] | 비출력 문자 시퀀스 종료. |  
 | <\u@\h \W>\$ | 프롬프트 문자열. |  


## 프롬프트 저장  

- 프롬프트 정보를 .bashrc 파일에 저장하게 되면 이 프롬프트가 계속 사용이 가능하다.   
 ```
 PS1="\[033[s\033[0;0H\033[0;41m\033[K\033[1;33m\t\033[0m\033[u\]<\u@\h \W>\$ "  
 
 export PS1
 ```

