# FTP 명령  

## FTP 응답  
- 125
  - 데이터 채널이 설정되었으며, 이어서 데이터 전송을 시작할 예정이다.
- 200
  - 명령 처리를 완료했다.
- 230
  - 사용자 로그인을 처리했다.
- 250
  - 요청한 파일 동작을 처리했다.
- 331
  - 로그인 이름을 정상적으로 처리했으므로, 암호를 처리해야 한다.
- 425
  - 데이터 채널의 연결이 이루어지지 않았다.
- 426
  - 연결을 취소하였다.
- 450
  - 파일 관련 처리를 완료하지 못했다.
- 451
  - 동작 처리를 완료하지 않았다.
- 500
  - 잘못된 명령이다.
- 501
  - 명령의 인수가 잘못되었다.
  
### FTP 로그인 과정  
FTP 로그인은 FTP 클라이언트가 FTP 서버와의 제어 채널 연결을 설정한 후에 로그인 이름과 암호를 전송하여 FTP 세션 연결을 설정하는 것이다. [그림 17-5]처럼 클라이언트는 FTP 서버의 21번 포트와 TCP 연결 설정을 시도한다. 서버로부터 FTP 서비스의 이용이 가능함을 의미하는 응답 코드 220을 수신하면 연결이 성공한 경우다.
![FTP 로그인 절차](http://dbscthumb.phinf.naver.net/3578_000_1/20141023224751858_QPPPJZOOU.jpg/ka8_244_i2.jpg?type=w383_fst_n&wm=Y)  
이후 USER 명령을 사용해 로그인 이름을 제공하고, PASS 명령으로 로그인 암호를 전송한다. 서버에서는 해당 사용자에 대한 인증 절차를 통해 로그인 가능 여부를 판단한다. 부적절한 사용자는 오류로 처리되지만, 정상적인 경우는 그림처럼 응답 코드 230을 전송하여 로그인 절차가 성공적으로 이루어졌음을 회신한다. 일단 성공적으로 로그인하면 FTP 세션이 설정되어 다른 FTP 명령을 사용해 파일 송수신 기능 등을 수행할 수 있다.  
![FTP 로그인의 예](http://dbscthumb.phinf.naver.net/3578_000_1/20141023224756668_CGRVNALWP.jpg/ka8_244_i3.jpg?type=w575_fst_n&wm=Y)  
[그림 17-6]은 텔넷 프로그램을 이용해 FTP 로그인 과정을 시뮬레이션한 것으로, FTP 서버는 uu.ac.kr 호스트라고 가정하였다(①). 먼저 telnet uu.ac.kr 21 명령을 입력하여 TCP 21번 포트의 FTP 서버와 접속을 시도한다. 이후 USER, PASS 명령을 사용해 로그인 이름 kihyun, 암호 kihyun을 전송하여 FTP 세션을 설정하였다(②). 연결이 설정된 후, 최초로 전송된 명령은 PWD로, FTP 서버의 현재 디렉토리 이름인 /export/faculty/kihyun의 메시지를 서버가 회신함을 알 수 있다(③). FTP 프로그램의 사용을 마치고, FTP 세션을 종료하려고 QUIT 명령을 마지막으로 입력하였다(④).  


## 요약    
1. FTP는 원격 시스템과의 파일 송수신 기능을 제공한다.

2. 불특정 다수에게 FTP 서비스를 제공하기 위한 익명 FTP 서비스는 로그인 이름으로 anonymous를 사용한다.

3. FTP는 FTP 명령을 전송하는 제어 채널과 파일을 전송하는 데이터 채널을 사용한다.

4. FTP의 데이터 채널은 파일을 송수신할 때 생성되며, 파일 전송이 완료되면 채널 연결이 즉시 해제된다.

5. FTP 제어 채널은 클라이언트가 21번 포트를 사용해 연결을 시도하며, 데이터 채널은 서버가 20번 포트를 사용해 연결을 시도한다.

6. TFTP는 FTP의 기능을 단순화하여 파일 송수신 기능만 수행하도록 설계되었다.

7. TFTP는 69번 포트의 UDP를 사용한다.
